import{g as S,u as I,a as C,r as w,b as B,d as i,o as E,e as F,f as t,w as a,h as _,i as H,x as N,y as P}from"./index-ec6168c3.js";import{_ as R}from"./_plugin-vue_export-helper-c27b6911.js";const b=p=>(N("data-v-59b361f1"),p=p(),P(),p),U={class:"editor"},z={class:"fck-editor"},M=b(()=>_("span",null,"编辑区",-1)),O={class:"float-menu"},T=b(()=>_("span",null,"文章信息",-1)),j={__name:"PostView",setup(p){const{proxy:f}=S(),V=I();C();const l=w({}),g=w(),x=B(),y={title:[{required:!0,message:"请输入标题"}]},k=window.innerHeight-240,D=()=>{g.value.validate(h=>{if(!h)return;let e={};if(Object.assign(e,l.value),console.log(e),e.data.replace(/<(?!img).*?>/g,"")===""){f.message.warning("正文不能为空！");return}let d=JSON.parse(localStorage.getItem("idbsize"));e.id=d+1;let u=new Date().getTime(),o=new Date(u),n=o.getDate(),s=o.getMonth()+1,r=o.getFullYear();o.getDay();let c=o.getHours(),m=o.getMinutes();s=s<10?"0"+s:s,n=n<10?"0"+n:n,c=c<10?"0"+c:c,m=m<10?"0"+m:m,e.time=r+"-"+s+"-"+n+" "+c+":"+m,e.timeStamp=u,e.nickname=x.getters.getLoginUserInfo.nickname,f.indexdb.updateDB(e),V.push(`/article/${d+1}`),f.globalParam.showAvater=!0})};return(h,e)=>{const v=i("FckEditor"),d=i("el-form-item"),u=i("el-card"),o=i("el-input"),n=i("el-button"),s=i("el-form");return E(),F("div",U,[t(s,{model:l.value,rules:y,ref_key:"formDataRef",ref:g,"label-width":"50px",class:"post-panel"},{default:a(()=>[_("div",z,[t(u,null,{header:a(()=>[M]),default:a(()=>[t(d,{prop:"data"},{default:a(()=>[t(v,{height:k,modelValue:l.value.data,"onUpdate:modelValue":e[0]||(e[0]=r=>l.value.data=r)},null,8,["modelValue"])]),_:1})]),_:1})]),_("div",O,[t(u,null,{header:a(()=>[T]),default:a(()=>[t(d,{label:"标题",prop:"title"},{default:a(()=>[t(o,{clearable:"",placeholder:"请输入标题",maxlength:10,modelValue:l.value.title,"onUpdate:modelValue":e[1]||(e[1]=r=>l.value.title=r)},null,8,["modelValue"])]),_:1}),t(d,{label:"梗概",prop:"info"},{default:a(()=>[t(o,{clearable:"",placeholder:"请输入梗概",modelValue:l.value.info,"onUpdate:modelValue":e[2]||(e[2]=r=>l.value.info=r),type:"textarea",rows:5,maxlength:100,resize:"none","show-word-limit":"",spellcheck:"false"},null,8,["modelValue"])]),_:1}),t(n,{type:"primary",style:{width:"100%"},onClick:D},{default:a(()=>[H("发送")]),_:1})]),_:1})])]),_:1},8,["model"])])}}},J=R(j,[["__scopeId","data-v-59b361f1"]]);export{J as default};
